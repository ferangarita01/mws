# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

runConfig:
  cpu: 1
  memoryMiB: 512
  concurrency: 80
  timeoutSeconds: 120
  minInstances: 0
  maxInstances: 2

env:
  # ðŸ”¹ Firebase - Client SDK (solo NEXT_PUBLIC_* â†’ valor "value", nunca secretos)
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    value: "AIzaSyDjIm9EAXcH0jRti-kL0xIffASG-XTJNQE"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    value: "1:816776193251:web:799d02c64c6b8daff5d1d6"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: "new-prototype-rmkd6.firebaseapp.com"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: "816776193251"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: "new-prototype-rmkd6"
    availability:
      - BUILD
      - RUNTIME

  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: "new-prototype-rmkd6.firebasestorage.app"
    availability:
      - BUILD
      - RUNTIME

  # ðŸ”¹ Firebase - Server SDK (Admin usa ADC â†’ solo necesita bucket, no claves)
  - variable: FIREBASE_STORAGE_BUCKET
    value: "new-prototype-rmkd6.firebasestorage.app"
    availability:
      - RUNTIME

  # ðŸ”¹ Resend (Email)
  - variable: RESEND_API_KEY
    secret: RESEND_API_KEY
    availability:
      - BUILD
      - RUNTIME

  - variable: SMTP_HOST
    value: smtp.resend.com
    availability:
      - RUNTIME

  - variable: SMTP_PORT
    value: "587"
    availability:
      - RUNTIME

  - variable: SMTP_USER
    value: resend
    availability:
      - RUNTIME

  - variable: SMTP_PASS
    secret: SMTP_PASS
    availability:
      - RUNTIME

  - variable: EMAIL_FROM
    value: "Muwise Team <onboarding@resend.dev>"
    availability:
      - RUNTIME      

  # ðŸ”¹ Stripe (Payments)
  - variable: STRIPE_SECRET_KEY
    secret: STRIPE_SECRET_KEY
    availability:
      - RUNTIME

  - variable: STRIPE_WEBHOOK_SECRET 
    secret: STRIPE_WEBHOOK_SECRET
    availability:
      - RUNTIME

  - variable: CREATOR_MONTHLY
    value: "price_1S2fFbBhg2ATDVHysElHLARz"
    availability:
      - RUNTIME

  - variable: CREATOR_ANNUAL
    value: "price_1S2fFfBhg2ATDVHyCeECTaLe"
    availability:
      - RUNTIME

  - variable: PRO_MONTHLY
    value: "price_1S2fFZBhg2ATDVHyvs06T51N"
    availability:
      - RUNTIME

  - variable: PRO_ANNUAL
    value: "price_1S2fFdBhg2ATDVHyyEvL1LfP"
    availability:
      - RUNTIME

  # ðŸ”¹ Application
  - variable: JWT_SECRET
    secret: JWT_SECRET
    availability:
      - RUNTIME

  # ðŸ”¹ Backend Base URL â†’ usar Cloud Run directo por ahora
  - variable: NEXT_PUBLIC_BASE_URL
    value: "https://studio-6rsg4lg3yq-uc.a.run.app"
    availability:
      - BUILD
      - RUNTIME

headers:
  - source: /.*
    headers:
      - key: Cross-Origin-Opener-Policy
        value: same-origin-allow-popups
      - key: X-Content-Type-Options
        value: nosniff
      - key: X-Frame-Options
        value: DENY
      - key: X-XSS-Protection
        value: "1; mode=block"
      - key: Referrer-Policy
        value: strict-origin-when-cross-origin
